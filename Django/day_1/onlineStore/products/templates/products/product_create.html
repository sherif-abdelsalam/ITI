{% extends 'layouts/base.html' %}

{% block content %}
<div style="max-width:760px;margin:0 auto;background:white;padding:28px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.06)">
	<h2 class="section-title" style="text-align:left;margin-bottom:18px;">Create Product</h2>

	{% if errors %}
	<div style="background:#fdecea;color:#c0392b;padding:12px;border-radius:8px;margin-bottom:16px;">
		<ul style="margin-left:18px;">
		{% for err in errors %}
			<li>{{ err }}</li>
		{% endfor %}
		</ul>
	</div>
	{% endif %}

    <form action="{% if product %}{% url 'products.edit' product.id %}{% else %}{% url 'products.create' %}{% endif %}" method="post">
		{% csrf_token %}

		{% if product %}
		<input type="hidden" name="product_id" value="{{ product.id }}">
		{% endif %}

		<div style="display:grid;grid-template-columns:1fr;gap:12px;">
			<label style="font-weight:600;color:#2c3e50;" >Name</label>
			<input name="name" type="text" required maxlength="100" value="{{ product.name|default:'' }}" placeholder="Product name"
				style="padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;">

			<label style="font-weight:600;color:#2c3e50;">Description</label>
			<textarea name="description" rows="4" maxlength="500" placeholder="Short description"
				style="padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;resize:vertical;">{{ product.description|default:'' }}</textarea>

			<div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
				<div>
					<label style="font-weight:600;color:#2c3e50;">Price</label>
					<input name="price" type="number" step="0.01" min="0" required placeholder="0.00" value="{{ product.price|default:'' }}"
						style="padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;width:100%;">
				</div>
				<div>
					<label style="font-weight:600;color:#2c3e50;">Stock</label>
					<input name="stock" type="number" step="1" min="0" required placeholder="0" value="{{ product.stock|default:'' }}"
						style="padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;width:100%;">
				</div>
			</div>

			<label style="font-weight:600;color:#2c3e50;">Image URL</label>
			<input name="image" type="text" placeholder="Enter image name" value="{{ product.image|default:'' }}"
				style="padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;">

			<div style="display:flex;gap:12px;margin-top:6px;">
				<button type="submit" class="btn btn-primary" style="padding:12px 18px;border-radius:10px;">{% if product %}Update{% else %}Create{% endif %}</button>
				<a href="{% url 'products.index' %}" class="btn btn-secondary" style="display:inline-flex;align-items:center;padding:12px 18px;border-radius:10px;text-decoration:none;">Cancel</a>
				{% if product %}
				<a href="{{ product.delete_url }}" class="btn" style="background:#fdecea;color:#c0392b;padding:10px 12px;border-radius:10px;text-decoration:none;margin-left:6px;">Delete</a>
				{% endif %}
			</div>
		</div>
	</form>
</div>

{% endblock %}

